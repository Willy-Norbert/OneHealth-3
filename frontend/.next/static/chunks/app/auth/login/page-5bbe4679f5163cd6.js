(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[716],{6609:function(t,e,n){Promise.resolve().then(n.bind(n,4871))},6463:function(t,e,n){"use strict";var r=n(1169);n.o(r,"usePathname")&&n.d(e,{usePathname:function(){return r.usePathname}}),n.o(r,"useRouter")&&n.d(e,{useRouter:function(){return r.useRouter}}),n.o(r,"useSearchParams")&&n.d(e,{useSearchParams:function(){return r.useSearchParams}})},357:function(t,e,n){"use strict";var r,o;t.exports=(null==(r=n.g.process)?void 0:r.env)&&"object"==typeof(null==(o=n.g.process)?void 0:o.env)?n.g.process:n(8081)},8081:function(t){!function(){var e={229:function(t){var e,n,r,o=t.exports={};function a(){throw Error("setTimeout has not been defined")}function i(){throw Error("clearTimeout has not been defined")}function s(t){if(e===setTimeout)return setTimeout(t,0);if((e===a||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(n){try{return e.call(null,t,0)}catch(n){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:a}catch(t){e=a}try{n="function"==typeof clearTimeout?clearTimeout:i}catch(t){n=i}}();var c=[],u=!1,l=-1;function d(){u&&r&&(u=!1,r.length?c=r.concat(c):l=-1,c.length&&h())}function h(){if(!u){var t=s(d);u=!0;for(var e=c.length;e;){for(r=c,c=[];++l<e;)r&&r[l].run();l=-1,e=c.length}r=null,u=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===i||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function m(t,e){this.fun=t,this.array=e}function p(){}o.nextTick=function(t){var e=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new m(t,e)),1!==c.length||u||s(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=p,o.addListener=p,o.once=p,o.off=p,o.removeListener=p,o.removeAllListeners=p,o.emit=p,o.prependListener=p,o.prependOnceListener=p,o.listeners=function(t){return[]},o.binding=function(t){throw Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw Error("process.chdir is not supported")},o.umask=function(){return 0}}},n={};function r(t){var o=n[t];if(void 0!==o)return o.exports;var a=n[t]={exports:{}},i=!0;try{e[t](a,a.exports,r),i=!1}finally{i&&delete n[t]}return a.exports}r.ab="//";var o=r(229);t.exports=o}()},4871:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return c}});var r=n(7437),o=n(2265),a=n(6463),i=n(1270);function s(){let{login:t}=(0,i.a)(),e=(0,a.useRouter)(),n=(0,a.useSearchParams)(),[s,c]=(0,o.useState)(""),[u,l]=(0,o.useState)(""),[d,h]=(0,o.useState)(!1),[m,p]=(0,o.useState)(null),f=async r=>{r.preventDefault(),p(null),h(!0);try{await t(s,u);let r=n.get("redirect")||"/dashboard";e.push(r)}catch(t){p((null==t?void 0:t.message)||"Login failed")}finally{h(!1)}};return(0,r.jsx)("main",{className:"flex min-h-screen items-center justify-center p-6",children:(0,r.jsxs)("div",{className:"card w-full max-w-md p-6",children:[(0,r.jsx)("h1",{className:"text-2xl font-semibold text-navy",children:"Login"}),(0,r.jsxs)("form",{onSubmit:f,className:"mt-6 space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium",children:"Email"}),(0,r.jsx)("input",{type:"email",className:"mt-1 w-full rounded-lg border px-3 py-2",value:s,onChange:t=>c(t.target.value),required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium",children:"Password"}),(0,r.jsx)("input",{type:"password",className:"mt-1 w-full rounded-lg border px-3 py-2",value:u,onChange:t=>l(t.target.value),required:!0})]}),m&&(0,r.jsx)("p",{className:"text-red-600 text-sm",children:m}),(0,r.jsx)("button",{disabled:d,className:"btn-primary w-full",children:d?"Signing in...":"Sign in"}),(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,r.jsx)("a",{href:"/auth/forgot",className:"text-primary",children:"Forgot password?"}),(0,r.jsx)("a",{href:"/auth/register",className:"text-navy",children:"Create account"})]})]})]})})}function c(){return(0,r.jsx)(o.Suspense,{children:(0,r.jsx)(s,{})})}},1270:function(t,e,n){"use strict";n.d(e,{H:function(){return u},a:function(){return l}});var r=n(7437),o=n(2265),a=n(2649),i=n(9714),s=n(2800);let c=(0,o.createContext)(void 0);function u(t){let{children:e}=t,[n,u]=(0,o.useState)(a.Z.get("token")||null),[l,d]=(0,o.useState)(null),h=(0,o.useCallback)(t=>{try{let e=(0,i.o)(t);return{id:e.id,role:e.role}}catch(t){return null}},[]);(0,o.useEffect)(()=>{n?(d(h(n)),a.Z.set("token",n)):(d(null),a.Z.remove("token"))},[n,h]);let m=(0,o.useCallback)(async(t,e)=>{var n;let r=await s.hi.login({email:t,password:e}),o=r.token||(null===(n=r.data)||void 0===n?void 0:n.token);if(!o)throw Error("No token returned from server");u(o),await f()},[]),p=(0,o.useCallback)(()=>{u(null),d(null),a.Z.remove("token")},[]),f=(0,o.useCallback)(async()=>{if(n)try{var t;let e=await s.hi.me(),r=(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.user)||(null==e?void 0:e.user)||(null==e?void 0:e.data);d(t=>({...t||h(n)||{id:"",role:"patient"},...r}))}catch(t){}},[n,h]),y=(0,o.useMemo)(()=>({user:l,token:n,isAuthenticated:!!n,login:m,logout:p,refreshProfile:f}),[l,n,m,p,f]);return(0,r.jsx)(c.Provider,{value:y,children:e})}function l(){let t=(0,o.useContext)(c);if(!t)throw Error("useAuth must be used within AuthProvider");return t}},2800:function(t,e,n){"use strict";n.d(e,{hi:function(){return i}});var r=n(2649);let o=n(357).env.NEXT_PUBLIC_API_URL||"http://localhost:5000/api";async function a(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.Z.get("token"),a={"Content-Type":"application/json"};e.headers&&Object.assign(a,e.headers),!1!==e.auth&&n&&(a.Authorization="Bearer ".concat(n));let i=await fetch("".concat(o).concat(t),{...e,headers:a,cache:"no-store"});if(!i.ok)throw Error(await i.text()||"Request failed: ".concat(i.status));try{return await i.json()}catch(t){return{}}}let i={register:t=>a("/auth/register",{method:"POST",body:JSON.stringify(t),auth:!1}),login:t=>a("/auth/login",{method:"POST",body:JSON.stringify(t),auth:!1}),verifyOtp:t=>a("/auth/verify-otp",{method:"POST",body:JSON.stringify(t),auth:!1}),resendOtp:t=>a("/auth/resend-otp",{method:"POST",body:JSON.stringify(t),auth:!1}),forgotPassword:t=>a("/auth/forgot-password",{method:"POST",body:JSON.stringify(t),auth:!1}),resetPassword:t=>a("/auth/reset-password",{method:"POST",body:JSON.stringify(t),auth:!1}),me:()=>a("/auth/me",{method:"GET"}),hospitals:{list:()=>a("/hospitals",{method:"GET",auth:!1}),get:t=>a("/hospitals/".concat(t),{method:"GET",auth:!1})},departments:{list:t=>a("/departments".concat(t?"?".concat(t.toString()):""),{method:"GET",auth:!1}),byHospital:t=>a("/departments/hospital/".concat(t),{method:"GET",auth:!1})},doctors:{list:t=>a("/doctors".concat(t?"?".concat(t.toString()):""),{method:"GET",auth:!1}),byHospitalDepartment:(t,e)=>a("/doctors/hospital/".concat(t,"/department/").concat(e),{method:"GET",auth:!1}),get:t=>a("/doctors/".concat(t),{method:"GET",auth:!1})},insurance:{list:()=>a("/insurance",{method:"GET",auth:!1})},teleconsult:{consultationTypes:()=>a("/teleconsultation/consultation-types",{method:"GET",auth:!1}),insuranceOptions:()=>a("/teleconsultation/insurance-options",{method:"GET",auth:!1}),create:t=>a("/teleconsultation",{method:"POST",body:JSON.stringify(t)}),mine:()=>a("/teleconsultation/my-consultations",{method:"GET"}),get:t=>a("/teleconsultation/".concat(t),{method:"GET"}),doctor:t=>a("/teleconsultation/doctor/".concat(t,"/consultations"),{method:"GET"})},appointments:{availableSlots:()=>a("/appointments/available-slots",{method:"GET",auth:!1}),create:t=>a("/appointments",{method:"POST",body:JSON.stringify(t)}),my:()=>a("/appointments/my-appointments",{method:"GET"}),myDoctor:()=>a("/appointments/my-doctor-appointments",{method:"GET"}),reassign:(t,e)=>a("/appointments/".concat(t,"/reassign"),{method:"PATCH",body:JSON.stringify(e)}),cancel:t=>a("/appointments/".concat(t,"/cancel"),{method:"PATCH"}),get:t=>a("/appointments/".concat(t),{method:"GET"})},payments:{checkout:t=>a("/payments/checkout",{method:"POST",body:JSON.stringify(t)}),verify:t=>a("/payments/verify",{method:"POST",body:JSON.stringify(t)})},meetings:{user:t=>a("/meetings/user/".concat(t),{method:"GET"}),get:t=>a("/meetings/".concat(t),{method:"GET"})},prescriptions:{create:t=>a("/prescriptions",{method:"POST",body:JSON.stringify(t)}),byPatient:t=>a("/prescriptions/patient/".concat(t),{method:"GET"}),myAuthored:()=>a("/prescriptions/doctor-authored",{method:"GET"})},ai:{symptomChecker:t=>a("/ai/symptom-checker",{method:"POST",body:JSON.stringify(t)}),bookAppointmentHelper:t=>a("/ai/book-appointment-helper",{method:"POST",body:JSON.stringify(t)}),prescriptionHelper:t=>a("/ai/prescription-helper",{method:"POST",body:JSON.stringify(t)}),referralSupport:t=>a("/ai/referral-support",{method:"POST",body:JSON.stringify(t)}),healthTips:t=>a("/ai/health-tips",{method:"POST",body:JSON.stringify(t)})},notifications:{list:()=>a("/notifications",{method:"GET"}),markRead:t=>a("/notifications/".concat(t,"/read"),{method:"PUT"})},pharmacy:{list:()=>a("/pharmacies",{method:"GET",auth:!1}),near:(t,e,n)=>a("/pharmacies/near?lat=".concat(t,"&lng=").concat(e).concat(n?"&radius=".concat(n):""),{method:"GET",auth:!1}),get:t=>a("/pharmacies/".concat(t),{method:"GET",auth:!1})},orders:{create:t=>a("/orders",{method:"POST",body:JSON.stringify(t)}),my:t=>a("/orders/patients/".concat(t,"/orders"),{method:"GET"})},uploads:{image:async t=>{let e=r.Z.get("token"),n=new FormData;n.append("image",t);let a=await fetch("".concat(o,"/upload/image"),{method:"POST",headers:e?{Authorization:"Bearer ".concat(e)}:void 0,body:n});if(!a.ok)throw Error("Upload failed");return a.json()}}}},2649:function(t,e,n){"use strict";function r(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}n.d(e,{Z:function(){return o}});var o=function t(e,n){function o(t,o,a){if("undefined"!=typeof document){"number"==typeof(a=r({},n,a)).expires&&(a.expires=new Date(Date.now()+864e5*a.expires)),a.expires&&(a.expires=a.expires.toUTCString()),t=encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var i="";for(var s in a)a[s]&&(i+="; "+s,!0!==a[s]&&(i+="="+a[s].split(";")[0]));return document.cookie=t+"="+e.write(o,t)+i}}return Object.create({set:o,get:function(t){if("undefined"!=typeof document&&(!arguments.length||t)){for(var n=document.cookie?document.cookie.split("; "):[],r={},o=0;o<n.length;o++){var a=n[o].split("="),i=a.slice(1).join("=");try{var s=decodeURIComponent(a[0]);if(r[s]=e.read(i,s),t===s)break}catch(t){}}return t?r[t]:r}},remove:function(t,e){o(t,"",r({},e,{expires:-1}))},withAttributes:function(e){return t(this.converter,r({},this.attributes,e))},withConverter:function(e){return t(r({},this.converter,e),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(e)}})}({read:function(t){return'"'===t[0]&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})},9714:function(t,e,n){"use strict";n.d(e,{o:function(){return o}});class r extends Error{}function o(t,e){let n;if("string"!=typeof t)throw new r("Invalid token specified: must be a string");e||(e={});let o=!0===e.header?0:1,a=t.split(".")[o];if("string"!=typeof a)throw new r(`Invalid token specified: missing part #${o+1}`);try{n=function(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw Error("base64 string is not of the correct length")}try{var n;return n=e,decodeURIComponent(atob(n).replace(/(.)/g,(t,e)=>{let n=e.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n}))}catch(t){return atob(e)}}(a)}catch(t){throw new r(`Invalid token specified: invalid base64 for part #${o+1} (${t.message})`)}try{return JSON.parse(n)}catch(t){throw new r(`Invalid token specified: invalid json for part #${o+1} (${t.message})`)}}r.prototype.name="InvalidTokenError"}},function(t){t.O(0,[971,23,744],function(){return t(t.s=6609)}),_N_E=t.O()}]);