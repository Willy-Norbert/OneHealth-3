(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[190],{826:function(e,t,n){Promise.resolve().then(n.bind(n,5932))},7138:function(e,t,n){"use strict";n.d(t,{default:function(){return o.a}});var a=n(231),o=n.n(a)},6463:function(e,t,n){"use strict";var a=n(1169);n.o(a,"usePathname")&&n.d(t,{usePathname:function(){return a.usePathname}}),n.o(a,"useRouter")&&n.d(t,{useRouter:function(){return a.useRouter}}),n.o(a,"useSearchParams")&&n.d(t,{useSearchParams:function(){return a.useSearchParams}})},5932:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var a=n(7437),o=n(4963),r=n(9039),i=n(2800),s=n(7138);function c(){var e,t,n,c,l,d;let{data:u}=(0,r.ZP)("hospitals",()=>i.hi.hospitals.list()),{data:h}=(0,r.ZP)("insurance",()=>i.hi.insurance.list()),{data:m}=(0,r.ZP)("slots",()=>i.hi.appointments.availableSlots());return(0,a.jsx)(o.V,{menu:[{href:"/patient",label:"Overview"},{href:"/patient/appointments",label:"Appointments"},{href:"/patient/teleconsult",label:"Teleconsultation"},{href:"/patient/pharmacy",label:"Pharmacy"},{href:"/patient/ai",label:"AI Assistant"},{href:"/patient/emergency",label:"Emergency"},{href:"/patient/records",label:"Medical Records"},{href:"/patient/orders",label:"My Orders"}],children:(0,a.jsxs)("div",{className:"grid gap-6 md:grid-cols-3",children:[(0,a.jsxs)("div",{className:"card p-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-navy",children:"Hospitals"}),(0,a.jsx)("ul",{className:"mt-3 list-disc pl-5 text-sm",children:null==u?void 0:null===(n=u.data)||void 0===n?void 0:null===(t=n.hospitals)||void 0===t?void 0:null===(e=t.slice(0,5))||void 0===e?void 0:e.map(e=>(0,a.jsx)("li",{children:(0,a.jsx)(s.default,{href:"/hospitals/".concat(e._id),className:"text-primary",children:e.name})},e._id))})]}),(0,a.jsxs)("div",{className:"card p-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-navy",children:"Insurance Providers"}),(0,a.jsx)("ul",{className:"mt-3 list-disc pl-5 text-sm",children:null==h?void 0:null===(d=h.data)||void 0===d?void 0:null===(l=d.insuranceProviders)||void 0===l?void 0:null===(c=l.slice(0,5))||void 0===c?void 0:c.map(e=>(0,a.jsx)("li",{children:e.name},e._id))})]}),(0,a.jsxs)("div",{className:"card p-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-navy",children:"Next Slots"}),(0,a.jsx)("ul",{className:"mt-3 list-disc pl-5 text-sm",children:Array.isArray(m)&&m.slice(0,5).map((e,t)=>(0,a.jsx)("li",{children:e},t))})]})]})})}},4963:function(e,t,n){"use strict";n.d(t,{V:function(){return c}});var a=n(7437),o=n(7138),r=n(6463);function i(e){let{items:t}=e,n=(0,r.usePathname)();return(0,a.jsxs)("aside",{className:"h-full w-64 shrink-0 bg-navy text-white",children:[(0,a.jsx)("div",{className:"p-4 text-lg font-semibold",children:"OneHealthline"}),(0,a.jsx)("nav",{className:"px-2",children:t.map(e=>(0,a.jsx)(o.default,{href:e.href,className:"block rounded-md px-3 py-2 text-sm hover:bg-white/10 ".concat(n===e.href?"bg-white/10":""),children:e.label},e.href))})]})}var s=n(5135);function c(e){var t;let{children:n,menu:o}=e,{user:r,logout:c}=(0,s.a)();return(0,a.jsxs)("div",{className:"min-h-screen flex",children:[(0,a.jsx)(i,{items:o}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("header",{className:"sticky top-0 z-10 flex h-14 items-center justify-between border-b bg-white px-4",children:[(0,a.jsxs)("div",{className:"font-semibold text-navy",children:[null==r?void 0:null===(t=r.role)||void 0===t?void 0:t.toUpperCase()," Portal"]}),(0,a.jsx)("div",{className:"flex items-center gap-3 text-sm",children:(0,a.jsx)("button",{onClick:c,className:"rounded-md border px-3 py-1",children:"Logout"})})]}),(0,a.jsx)("main",{className:"p-6",children:n})]})]})}},5135:function(e,t,n){"use strict";n.d(t,{H:function(){return l},a:function(){return d}});var a=n(7437),o=n(2265),r=n(2649);class i extends Error{}i.prototype.name="InvalidTokenError";var s=n(2800);let c=(0,o.createContext)(void 0);function l(e){let{children:t}=e,[n,l]=(0,o.useState)(r.Z.get("token")||null),[d,u]=(0,o.useState)(null),h=(0,o.useCallback)(e=>{try{let t=function(e,t){let n;if("string"!=typeof e)throw new i("Invalid token specified: must be a string");t||(t={});let a=!0===t.header?0:1,o=e.split(".")[a];if("string"!=typeof o)throw new i(`Invalid token specified: missing part #${a+1}`);try{n=function(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw Error("base64 string is not of the correct length")}try{var n;return n=t,decodeURIComponent(atob(n).replace(/(.)/g,(e,t)=>{let n=t.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n}))}catch(e){return atob(t)}}(o)}catch(e){throw new i(`Invalid token specified: invalid base64 for part #${a+1} (${e.message})`)}try{return JSON.parse(n)}catch(e){throw new i(`Invalid token specified: invalid json for part #${a+1} (${e.message})`)}}(e);return{id:t.id,role:t.role}}catch(e){return null}},[]);(0,o.useEffect)(()=>{n?(u(h(n)),r.Z.set("token",n)):(u(null),r.Z.remove("token"))},[n,h]);let m=(0,o.useCallback)(async(e,t)=>{var n;let a=await s.hi.login({email:e,password:t}),o=a.token||(null===(n=a.data)||void 0===n?void 0:n.token);if(!o)throw Error("No token returned from server");l(o),await f()},[]),p=(0,o.useCallback)(()=>{l(null),u(null),r.Z.remove("token")},[]),f=(0,o.useCallback)(async()=>{if(n)try{var e;let t=await s.hi.me(),a=(null==t?void 0:null===(e=t.data)||void 0===e?void 0:e.user)||(null==t?void 0:t.user)||(null==t?void 0:t.data);u(e=>({...e||h(n)||{id:"",role:"patient"},...a}))}catch(e){}},[n,h]),v=(0,o.useMemo)(()=>({user:d,token:n,isAuthenticated:!!n,login:m,logout:p,refreshProfile:f}),[d,n,m,p,f]);return(0,a.jsx)(c.Provider,{value:v,children:t})}function d(){let e=(0,o.useContext)(c);if(!e)throw Error("useAuth must be used within AuthProvider");return e}},2800:function(e,t,n){"use strict";n.d(t,{hi:function(){return i}});var a=n(2649);let o=n(357).env.NEXT_PUBLIC_API_URL||"http://localhost:5000/api";async function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=a.Z.get("token"),r={"Content-Type":"application/json"};t.headers&&Object.assign(r,t.headers),!1!==t.auth&&n&&(r.Authorization="Bearer ".concat(n));let i=await fetch("".concat(o).concat(e),{...t,headers:r,cache:"no-store"});if(!i.ok)throw Error(await i.text()||"Request failed: ".concat(i.status));try{return await i.json()}catch(e){return{}}}let i={register:e=>r("/auth/register",{method:"POST",body:JSON.stringify(e),auth:!1}),login:e=>r("/auth/login",{method:"POST",body:JSON.stringify(e),auth:!1}),verifyOtp:e=>r("/auth/verify-otp",{method:"POST",body:JSON.stringify(e),auth:!1}),resendOtp:e=>r("/auth/resend-otp",{method:"POST",body:JSON.stringify(e),auth:!1}),forgotPassword:e=>r("/auth/forgot-password",{method:"POST",body:JSON.stringify(e),auth:!1}),resetPassword:e=>r("/auth/reset-password",{method:"POST",body:JSON.stringify(e),auth:!1}),me:()=>r("/auth/me",{method:"GET"}),hospitals:{list:()=>r("/hospitals",{method:"GET",auth:!1}),get:e=>r("/hospitals/".concat(e),{method:"GET",auth:!1})},departments:{list:e=>r("/departments".concat(e?"?".concat(e.toString()):""),{method:"GET",auth:!1}),byHospital:e=>r("/departments/hospital/".concat(e),{method:"GET",auth:!1})},doctors:{list:e=>r("/doctors".concat(e?"?".concat(e.toString()):""),{method:"GET",auth:!1}),byHospitalDepartment:(e,t)=>r("/doctors/hospital/".concat(e,"/department/").concat(t),{method:"GET",auth:!1}),get:e=>r("/doctors/".concat(e),{method:"GET",auth:!1})},insurance:{list:()=>r("/insurance",{method:"GET",auth:!1})},teleconsult:{consultationTypes:()=>r("/teleconsultation/consultation-types",{method:"GET",auth:!1}),insuranceOptions:()=>r("/teleconsultation/insurance-options",{method:"GET",auth:!1}),create:e=>r("/teleconsultation",{method:"POST",body:JSON.stringify(e)}),mine:()=>r("/teleconsultation/my-consultations",{method:"GET"}),get:e=>r("/teleconsultation/".concat(e),{method:"GET"}),doctor:e=>r("/teleconsultation/doctor/".concat(e,"/consultations"),{method:"GET"})},appointments:{availableSlots:()=>r("/appointments/available-slots",{method:"GET",auth:!1}),create:e=>r("/appointments",{method:"POST",body:JSON.stringify(e)}),my:()=>r("/appointments/my-appointments",{method:"GET"}),myDoctor:()=>r("/appointments/my-doctor-appointments",{method:"GET"}),reassign:(e,t)=>r("/appointments/".concat(e,"/reassign"),{method:"PATCH",body:JSON.stringify(t)}),cancel:e=>r("/appointments/".concat(e,"/cancel"),{method:"PATCH"})},payments:{checkout:e=>r("/payments/checkout",{method:"POST",body:JSON.stringify(e)}),verify:e=>r("/payments/verify",{method:"POST",body:JSON.stringify(e)})},ai:{symptomChecker:e=>r("/ai/symptom-checker",{method:"POST",body:JSON.stringify(e)}),bookAppointmentHelper:e=>r("/ai/book-appointment-helper",{method:"POST",body:JSON.stringify(e)}),prescriptionHelper:e=>r("/ai/prescription-helper",{method:"POST",body:JSON.stringify(e)}),referralSupport:e=>r("/ai/referral-support",{method:"POST",body:JSON.stringify(e)}),healthTips:e=>r("/ai/health-tips",{method:"POST",body:JSON.stringify(e)})},notifications:{list:()=>r("/notifications",{method:"GET"}),markRead:e=>r("/notifications/".concat(e,"/read"),{method:"PUT"})},pharmacy:{list:()=>r("/pharmacies",{method:"GET",auth:!1}),near:(e,t,n)=>r("/pharmacies/near?lat=".concat(e,"&lng=").concat(t).concat(n?"&radius=".concat(n):""),{method:"GET",auth:!1}),get:e=>r("/pharmacies/".concat(e),{method:"GET",auth:!1})},orders:{create:e=>r("/orders",{method:"POST",body:JSON.stringify(e)}),my:e=>r("/orders/patients/".concat(e,"/orders"),{method:"GET"})},uploads:{image:async e=>{let t=a.Z.get("token"),n=new FormData;n.append("image",e);let r=await fetch("".concat(o,"/upload/image"),{method:"POST",headers:t?{Authorization:"Bearer ".concat(t)}:void 0,body:n});if(!r.ok)throw Error("Upload failed");return r.json()}}}},2649:function(e,t,n){"use strict";function a(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)e[a]=n[a]}return e}n.d(t,{Z:function(){return o}});var o=function e(t,n){function o(e,o,r){if("undefined"!=typeof document){"number"==typeof(r=a({},n,r)).expires&&(r.expires=new Date(Date.now()+864e5*r.expires)),r.expires&&(r.expires=r.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var i="";for(var s in r)r[s]&&(i+="; "+s,!0!==r[s]&&(i+="="+r[s].split(";")[0]));return document.cookie=e+"="+t.write(o,e)+i}}return Object.create({set:o,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var n=document.cookie?document.cookie.split("; "):[],a={},o=0;o<n.length;o++){var r=n[o].split("="),i=r.slice(1).join("=");try{var s=decodeURIComponent(r[0]);if(a[s]=t.read(i,s),e===s)break}catch(e){}}return e?a[e]:a}},remove:function(e,t){o(e,"",a({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,a({},this.attributes,t))},withConverter:function(t){return e(a({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}},function(e){e.O(0,[724,231,971,23,744],function(){return e(e.s=826)}),_N_E=e.O()}]);