(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[190],{826:function(t,e,a){Promise.resolve().then(a.bind(a,5932))},5932:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return l}});var n=a(7437),i=a(4963),o=a(9039),s=a(2800),r=a(7138);function l(){var t,e,a,l,c,d;let{data:h}=(0,o.ZP)("hospitals",()=>s.hi.hospitals.list()),{data:u}=(0,o.ZP)("insurance",()=>s.hi.insurance.list()),{data:m}=(0,o.ZP)("slots",()=>s.hi.appointments.availableSlots());return(0,n.jsx)(i.V,{menu:[{href:"/patient",label:"Overview"},{href:"/patient/appointments",label:"Appointments"},{href:"/patient/teleconsult",label:"Teleconsultation"},{href:"/patient/pharmacy",label:"Pharmacy"},{href:"/patient/ai",label:"AI Assistant"},{href:"/patient/emergency",label:"Emergency"},{href:"/patient/records",label:"Medical Records"},{href:"/patient/orders",label:"My Orders"}],children:(0,n.jsxs)("div",{className:"grid gap-6 md:grid-cols-3",children:[(0,n.jsxs)("div",{className:"card p-6",children:[(0,n.jsx)("h2",{className:"text-lg font-semibold text-navy",children:"Hospitals"}),(0,n.jsx)("ul",{className:"mt-3 list-disc pl-5 text-sm",children:null==h?void 0:null===(a=h.data)||void 0===a?void 0:null===(e=a.hospitals)||void 0===e?void 0:null===(t=e.slice(0,5))||void 0===t?void 0:t.map(t=>(0,n.jsx)("li",{children:(0,n.jsx)(r.default,{href:"/hospitals/".concat(t._id),className:"text-primary",children:t.name})},t._id))})]}),(0,n.jsxs)("div",{className:"card p-6",children:[(0,n.jsx)("h2",{className:"text-lg font-semibold text-navy",children:"Insurance Providers"}),(0,n.jsx)("ul",{className:"mt-3 list-disc pl-5 text-sm",children:null==u?void 0:null===(d=u.data)||void 0===d?void 0:null===(c=d.insuranceProviders)||void 0===c?void 0:null===(l=c.slice(0,5))||void 0===l?void 0:l.map(t=>(0,n.jsx)("li",{children:t.name},t._id))})]}),(0,n.jsxs)("div",{className:"card p-6",children:[(0,n.jsx)("h2",{className:"text-lg font-semibold text-navy",children:"Next Slots"}),(0,n.jsx)("ul",{className:"mt-3 list-disc pl-5 text-sm",children:Array.isArray(m)&&m.slice(0,5).map((t,e)=>(0,n.jsx)("li",{children:t},e))})]})]})})}},4963:function(t,e,a){"use strict";a.d(e,{V:function(){return d}});var n=a(7437),i=a(7138),o=a(6463);function s(t){let{items:e}=t,a=(0,o.usePathname)();return(0,n.jsxs)("aside",{className:"h-full w-64 shrink-0 bg-navy text-white",children:[(0,n.jsx)("div",{className:"p-4 text-lg font-semibold",children:"OneHealthline"}),(0,n.jsx)("nav",{className:"px-2",children:e.map(t=>(0,n.jsx)(i.default,{href:t.href,className:"block rounded-md px-3 py-2 text-sm hover:bg-white/10 ".concat(a===t.href?"bg-white/10":""),children:t.label},t.href))})]})}var r=a(1270),l=a(6648),c=a(3355);function d(t){var e;let{children:a,menu:i}=t,{user:o,logout:d}=(0,r.a)(),{notifications:h}=(0,c.z)();return(0,n.jsxs)("div",{className:"min-h-screen flex",children:[(0,n.jsx)(s,{items:i}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsxs)("header",{className:"sticky top-0 z-10 flex h-14 items-center justify-between border-b bg-white px-4",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)(l.default,{src:"/logo.png",alt:"OneHealthline",width:28,height:28}),(0,n.jsxs)("div",{className:"font-semibold text-navy",children:[null==o?void 0:null===(e=o.role)||void 0===e?void 0:e.toUpperCase()," Portal"]})]}),(0,n.jsxs)("div",{className:"flex items-center gap-3 text-sm",children:[(0,n.jsx)("div",{className:"relative",children:(0,n.jsxs)("span",{className:"rounded-full bg-primary/10 px-3 py-1 text-primary",children:[h.length," Notifications"]})}),(0,n.jsx)("button",{onClick:d,className:"rounded-md border px-3 py-1",children:"Logout"})]})]}),(0,n.jsx)("main",{className:"p-6",children:a})]})]})}},1270:function(t,e,a){"use strict";a.d(e,{H:function(){return c},a:function(){return d}});var n=a(7437),i=a(2265),o=a(2649),s=a(9714),r=a(2800);let l=(0,i.createContext)(void 0);function c(t){let{children:e}=t,[a,c]=(0,i.useState)(o.Z.get("token")||null),[d,h]=(0,i.useState)(null),u=(0,i.useCallback)(t=>{try{let e=(0,s.o)(t);return{id:e.id,role:e.role}}catch(t){return null}},[]);(0,i.useEffect)(()=>{a?(h(u(a)),o.Z.set("token",a)):(h(null),o.Z.remove("token"))},[a,u]);let m=(0,i.useCallback)(async(t,e)=>{var a;let n=await r.hi.login({email:t,password:e}),i=n.token||(null===(a=n.data)||void 0===a?void 0:a.token);if(!i)throw Error("No token returned from server");c(i),await f()},[]),p=(0,i.useCallback)(()=>{c(null),h(null),o.Z.remove("token")},[]),f=(0,i.useCallback)(async()=>{if(a)try{var t;let e=await r.hi.me(),n=(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.user)||(null==e?void 0:e.user)||(null==e?void 0:e.data);h(t=>({...t||u(a)||{id:"",role:"patient"},...n}))}catch(t){}},[a,u]),y=(0,i.useMemo)(()=>({user:d,token:a,isAuthenticated:!!a,login:m,logout:p,refreshProfile:f}),[d,a,m,p,f]);return(0,n.jsx)(l.Provider,{value:y,children:e})}function d(){let t=(0,i.useContext)(l);if(!t)throw Error("useAuth must be used within AuthProvider");return t}},3355:function(t,e,a){"use strict";a.d(e,{N:function(){return r},z:function(){return l}});var n=a(7437),i=a(2265),o=a(2800);let s=(0,i.createContext)(void 0);function r(t){let{children:e}=t,[a,r]=(0,i.useState)([]),l=async()=>{try{var t;let e=await o.hi.notifications.list();r((null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.notifications)||[])}catch(t){}};return(0,i.useEffect)(()=>{l();let t=setInterval(l,1e4);return()=>clearInterval(t)},[]),(0,n.jsx)(s.Provider,{value:{notifications:a,refresh:l},children:e})}function l(){let t=(0,i.useContext)(s);if(!t)throw Error("useNotifications must be used within NotificationsProvider");return t}},2800:function(t,e,a){"use strict";a.d(e,{hi:function(){return s}});var n=a(2649);let i=a(357).env.NEXT_PUBLIC_API_URL||"http://localhost:5000/api";async function o(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=n.Z.get("token"),o={"Content-Type":"application/json"};e.headers&&Object.assign(o,e.headers),!1!==e.auth&&a&&(o.Authorization="Bearer ".concat(a));let s=await fetch("".concat(i).concat(t),{...e,headers:o,cache:"no-store"});if(!s.ok)throw Error(await s.text()||"Request failed: ".concat(s.status));try{return await s.json()}catch(t){return{}}}let s={register:t=>o("/auth/register",{method:"POST",body:JSON.stringify(t),auth:!1}),login:t=>o("/auth/login",{method:"POST",body:JSON.stringify(t),auth:!1}),verifyOtp:t=>o("/auth/verify-otp",{method:"POST",body:JSON.stringify(t),auth:!1}),resendOtp:t=>o("/auth/resend-otp",{method:"POST",body:JSON.stringify(t),auth:!1}),forgotPassword:t=>o("/auth/forgot-password",{method:"POST",body:JSON.stringify(t),auth:!1}),resetPassword:t=>o("/auth/reset-password",{method:"POST",body:JSON.stringify(t),auth:!1}),me:()=>o("/auth/me",{method:"GET"}),hospitals:{list:()=>o("/hospitals",{method:"GET",auth:!1}),get:t=>o("/hospitals/".concat(t),{method:"GET",auth:!1})},departments:{list:t=>o("/departments".concat(t?"?".concat(t.toString()):""),{method:"GET",auth:!1}),byHospital:t=>o("/departments/hospital/".concat(t),{method:"GET",auth:!1})},doctors:{list:t=>o("/doctors".concat(t?"?".concat(t.toString()):""),{method:"GET",auth:!1}),byHospitalDepartment:(t,e)=>o("/doctors/hospital/".concat(t,"/department/").concat(e),{method:"GET",auth:!1}),get:t=>o("/doctors/".concat(t),{method:"GET",auth:!1})},insurance:{list:()=>o("/insurance",{method:"GET",auth:!1})},teleconsult:{consultationTypes:()=>o("/teleconsultation/consultation-types",{method:"GET",auth:!1}),insuranceOptions:()=>o("/teleconsultation/insurance-options",{method:"GET",auth:!1}),create:t=>o("/teleconsultation",{method:"POST",body:JSON.stringify(t)}),mine:()=>o("/teleconsultation/my-consultations",{method:"GET"}),get:t=>o("/teleconsultation/".concat(t),{method:"GET"}),doctor:t=>o("/teleconsultation/doctor/".concat(t,"/consultations"),{method:"GET"})},appointments:{availableSlots:()=>o("/appointments/available-slots",{method:"GET",auth:!1}),create:t=>o("/appointments",{method:"POST",body:JSON.stringify(t)}),my:()=>o("/appointments/my-appointments",{method:"GET"}),myDoctor:()=>o("/appointments/my-doctor-appointments",{method:"GET"}),reassign:(t,e)=>o("/appointments/".concat(t,"/reassign"),{method:"PATCH",body:JSON.stringify(e)}),cancel:t=>o("/appointments/".concat(t,"/cancel"),{method:"PATCH"}),get:t=>o("/appointments/".concat(t),{method:"GET"})},payments:{checkout:t=>o("/payments/checkout",{method:"POST",body:JSON.stringify(t)}),verify:t=>o("/payments/verify",{method:"POST",body:JSON.stringify(t)})},meetings:{user:t=>o("/meetings/user/".concat(t),{method:"GET"}),get:t=>o("/meetings/".concat(t),{method:"GET"})},prescriptions:{create:t=>o("/prescriptions",{method:"POST",body:JSON.stringify(t)}),byPatient:t=>o("/prescriptions/patient/".concat(t),{method:"GET"}),myAuthored:()=>o("/prescriptions/doctor-authored",{method:"GET"})},ai:{symptomChecker:t=>o("/ai/symptom-checker",{method:"POST",body:JSON.stringify(t)}),bookAppointmentHelper:t=>o("/ai/book-appointment-helper",{method:"POST",body:JSON.stringify(t)}),prescriptionHelper:t=>o("/ai/prescription-helper",{method:"POST",body:JSON.stringify(t)}),referralSupport:t=>o("/ai/referral-support",{method:"POST",body:JSON.stringify(t)}),healthTips:t=>o("/ai/health-tips",{method:"POST",body:JSON.stringify(t)})},notifications:{list:()=>o("/notifications",{method:"GET"}),markRead:t=>o("/notifications/".concat(t,"/read"),{method:"PUT"})},pharmacy:{list:()=>o("/pharmacies",{method:"GET",auth:!1}),near:(t,e,a)=>o("/pharmacies/near?lat=".concat(t,"&lng=").concat(e).concat(a?"&radius=".concat(a):""),{method:"GET",auth:!1}),get:t=>o("/pharmacies/".concat(t),{method:"GET",auth:!1})},orders:{create:t=>o("/orders",{method:"POST",body:JSON.stringify(t)}),my:t=>o("/orders/patients/".concat(t,"/orders"),{method:"GET"})},uploads:{image:async t=>{let e=n.Z.get("token"),a=new FormData;a.append("image",t);let o=await fetch("".concat(i,"/upload/image"),{method:"POST",headers:e?{Authorization:"Bearer ".concat(e)}:void 0,body:a});if(!o.ok)throw Error("Upload failed");return o.json()}}}}},function(t){t.O(0,[724,231,509,971,23,744],function(){return t(t.s=826)}),_N_E=t.O()}]);