(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[723],{2782:function(t,e,a){Promise.resolve().then(a.bind(a,6616))},6616:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return l}});var n=a(7437),o=a(9039),i=a(2800),s=a(2265),r=a(357);function l(){var t,e,a,l;let{data:d}=(0,o.ZP)("hospitals",()=>i.hi.hospitals.list()),{data:p,mutate:m}=(0,o.ZP)("myAppointments",()=>i.hi.appointments.my()),[u,h]=(0,s.useState)({hospital:"",department:"",appointmentType:"virtual",appointmentDate:"",appointmentTime:"",reasonForVisit:""}),[y,v]=(0,s.useState)([]),[f,g]=(0,s.useState)([]),[x,b]=(0,s.useState)(null),T=async t=>{var e;let a=await i.hi.departments.byHospital(t);v((null==a?void 0:null===(e=a.data)||void 0===e?void 0:e.departments)||[])},S=async()=>{var t;if(!u.hospital||!u.department||!u.appointmentDate)return;let e=new URLSearchParams({date:u.appointmentDate,hospital:u.hospital,department:u.department}),a=await N("/appointments/available-slots?".concat(e.toString()));g((null==a?void 0:null===(t=a.data)||void 0===t?void 0:t.availableSlots)||[])};async function N(t){return(await fetch("".concat(r.env.NEXT_PUBLIC_API_URL||"http://localhost:5000/api").concat(t),{headers:{"Content-Type":"application/json"},cache:"no-store"})).json()}let j=async t=>{t.preventDefault();let e={...u,patientDetails:{fullName:"Current User",email:"user@example.com",phoneNumber:"000",age:30,gender:"Male"}};b(await i.hi.appointments.create(e)),m()};return(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsx)("h1",{className:"text-2xl font-semibold text-navy",children:"Book Appointment"}),(0,n.jsxs)("form",{onSubmit:j,className:"card p-6 space-y-4 max-w-2xl",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm",children:"Hospital"}),(0,n.jsxs)("select",{className:"mt-1 w-full rounded border px-3 py-2",value:u.hospital,onChange:t=>{h({...u,hospital:t.target.value}),T(t.target.value)},required:!0,children:[(0,n.jsx)("option",{value:"",children:"Select"}),null==d?void 0:null===(e=d.data)||void 0===e?void 0:null===(t=e.hospitals)||void 0===t?void 0:t.map(t=>(0,n.jsx)("option",{value:t._id,children:t.name},t._id))]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm",children:"Department"}),(0,n.jsxs)("select",{className:"mt-1 w-full rounded border px-3 py-2",value:u.department,onChange:t=>h({...u,department:t.target.value}),required:!0,children:[(0,n.jsx)("option",{value:"",children:"Select"}),y.map(t=>(0,n.jsx)("option",{value:t._id,children:t.name},t._id))]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm",children:"Date"}),(0,n.jsx)("input",{type:"date",className:"mt-1 w-full rounded border px-3 py-2",value:u.appointmentDate,onChange:t=>h({...u,appointmentDate:t.target.value}),required:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm",children:"Time"}),(0,n.jsxs)("select",{className:"mt-1 w-full rounded border px-3 py-2",value:u.appointmentTime,onChange:t=>h({...u,appointmentTime:t.target.value}),required:!0,children:[(0,n.jsx)("option",{value:"",children:"Select"}),f.map(t=>(0,n.jsx)("option",{value:t,children:t},t))]})]})]}),(0,n.jsx)("div",{children:(0,n.jsx)("button",{type:"button",onClick:S,className:"rounded border px-3 py-2 text-sm",children:"Load available slots"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm",children:"Reason"}),(0,n.jsx)("textarea",{className:"mt-1 w-full rounded border px-3 py-2",value:u.reasonForVisit,onChange:t=>h({...u,reasonForVisit:t.target.value}),required:!0})]}),(0,n.jsx)("button",{className:"btn-primary",children:"Book appointment"})]}),x&&(0,n.jsx)("pre",{className:"card p-4 overflow-auto text-sm",children:JSON.stringify(x,null,2)}),(0,n.jsxs)("div",{className:"card p-6",children:[(0,n.jsx)("h2",{className:"font-semibold text-navy",children:"My Appointments"}),(0,n.jsx)("ul",{className:"mt-3 divide-y",children:null==p?void 0:null===(l=p.data)||void 0===l?void 0:null===(a=l.appointments)||void 0===a?void 0:a.map(t=>{var e,a,o;return(0,n.jsxs)("li",{className:"py-3 flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"font-medium",children:[null===(e=t.hospital)||void 0===e?void 0:e.name," — ",null===(a=t.department)||void 0===a?void 0:a.name]}),(0,n.jsxs)("div",{className:"text-sm text-slate-600",children:[new Date(t.appointmentDate).toLocaleDateString()," ",t.appointmentTime," — ",t.status]}),(null===(o=t.meeting)||void 0===o?void 0:o.link)&&(0,n.jsx)("a",{href:t.meeting.link,className:"text-primary text-sm",children:"Join meeting"})]}),(0,n.jsxs)("div",{className:"flex gap-2",children:["paid"!==t.paymentStatus&&(0,n.jsx)(c,{appointmentId:t._id}),(0,n.jsx)("button",{onClick:async()=>{await i.hi.appointments.cancel(t._id),m()},className:"rounded border px-3 py-1 text-sm",children:"Cancel"})]})]},t._id)})})]})]})}function c(t){let{appointmentId:e}=t,[a,o]=(0,s.useState)(!1),[r,l]=(0,s.useState)(),c=async()=>{o(!0);try{var t,a,n,s;let o=await i.hi.payments.checkout({appointmentId:e,provider:"DEV_FAKE"}),r=null==o?void 0:null===(a=o.data)||void 0===a?void 0:null===(t=a.payment)||void 0===t?void 0:t._id,c=await i.hi.payments.verify({paymentId:r});l(null==c?void 0:null===(s=c.data)||void 0===s?void 0:null===(n=s.payment)||void 0===n?void 0:n.status)}finally{o(!1)}};return(0,n.jsx)("button",{onClick:c,disabled:a,className:"btn-primary",children:r||(a?"Processing...":"Pay now")})}},2800:function(t,e,a){"use strict";a.d(e,{hi:function(){return s}});var n=a(2649);let o=a(357).env.NEXT_PUBLIC_API_URL||"http://localhost:5000/api";async function i(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=n.Z.get("token"),i={"Content-Type":"application/json"};e.headers&&Object.assign(i,e.headers),!1!==e.auth&&a&&(i.Authorization="Bearer ".concat(a));let s=await fetch("".concat(o).concat(t),{...e,headers:i,cache:"no-store"});if(!s.ok)throw Error(await s.text()||"Request failed: ".concat(s.status));try{return await s.json()}catch(t){return{}}}let s={register:t=>i("/auth/register",{method:"POST",body:JSON.stringify(t),auth:!1}),login:t=>i("/auth/login",{method:"POST",body:JSON.stringify(t),auth:!1}),verifyOtp:t=>i("/auth/verify-otp",{method:"POST",body:JSON.stringify(t),auth:!1}),resendOtp:t=>i("/auth/resend-otp",{method:"POST",body:JSON.stringify(t),auth:!1}),forgotPassword:t=>i("/auth/forgot-password",{method:"POST",body:JSON.stringify(t),auth:!1}),resetPassword:t=>i("/auth/reset-password",{method:"POST",body:JSON.stringify(t),auth:!1}),me:()=>i("/auth/me",{method:"GET"}),hospitals:{list:()=>i("/hospitals",{method:"GET",auth:!1}),get:t=>i("/hospitals/".concat(t),{method:"GET",auth:!1})},departments:{list:t=>i("/departments".concat(t?"?".concat(t.toString()):""),{method:"GET",auth:!1}),byHospital:t=>i("/departments/hospital/".concat(t),{method:"GET",auth:!1})},doctors:{list:t=>i("/doctors".concat(t?"?".concat(t.toString()):""),{method:"GET",auth:!1}),byHospitalDepartment:(t,e)=>i("/doctors/hospital/".concat(t,"/department/").concat(e),{method:"GET",auth:!1}),get:t=>i("/doctors/".concat(t),{method:"GET",auth:!1})},insurance:{list:()=>i("/insurance",{method:"GET",auth:!1})},teleconsult:{consultationTypes:()=>i("/teleconsultation/consultation-types",{method:"GET",auth:!1}),insuranceOptions:()=>i("/teleconsultation/insurance-options",{method:"GET",auth:!1}),create:t=>i("/teleconsultation",{method:"POST",body:JSON.stringify(t)}),mine:()=>i("/teleconsultation/my-consultations",{method:"GET"}),get:t=>i("/teleconsultation/".concat(t),{method:"GET"}),doctor:t=>i("/teleconsultation/doctor/".concat(t,"/consultations"),{method:"GET"})},appointments:{availableSlots:()=>i("/appointments/available-slots",{method:"GET",auth:!1}),create:t=>i("/appointments",{method:"POST",body:JSON.stringify(t)}),my:()=>i("/appointments/my-appointments",{method:"GET"}),myDoctor:()=>i("/appointments/my-doctor-appointments",{method:"GET"}),reassign:(t,e)=>i("/appointments/".concat(t,"/reassign"),{method:"PATCH",body:JSON.stringify(e)}),cancel:t=>i("/appointments/".concat(t,"/cancel"),{method:"PATCH"}),get:t=>i("/appointments/".concat(t),{method:"GET"})},payments:{checkout:t=>i("/payments/checkout",{method:"POST",body:JSON.stringify(t)}),verify:t=>i("/payments/verify",{method:"POST",body:JSON.stringify(t)})},meetings:{user:t=>i("/meetings/user/".concat(t),{method:"GET"}),get:t=>i("/meetings/".concat(t),{method:"GET"})},prescriptions:{create:t=>i("/prescriptions",{method:"POST",body:JSON.stringify(t)}),byPatient:t=>i("/prescriptions/patient/".concat(t),{method:"GET"}),myAuthored:()=>i("/prescriptions/doctor-authored",{method:"GET"})},ai:{symptomChecker:t=>i("/ai/symptom-checker",{method:"POST",body:JSON.stringify(t)}),bookAppointmentHelper:t=>i("/ai/book-appointment-helper",{method:"POST",body:JSON.stringify(t)}),prescriptionHelper:t=>i("/ai/prescription-helper",{method:"POST",body:JSON.stringify(t)}),referralSupport:t=>i("/ai/referral-support",{method:"POST",body:JSON.stringify(t)}),healthTips:t=>i("/ai/health-tips",{method:"POST",body:JSON.stringify(t)})},notifications:{list:()=>i("/notifications",{method:"GET"}),markRead:t=>i("/notifications/".concat(t,"/read"),{method:"PUT"})},pharmacy:{list:()=>i("/pharmacies",{method:"GET",auth:!1}),near:(t,e,a)=>i("/pharmacies/near?lat=".concat(t,"&lng=").concat(e).concat(a?"&radius=".concat(a):""),{method:"GET",auth:!1}),get:t=>i("/pharmacies/".concat(t),{method:"GET",auth:!1})},orders:{create:t=>i("/orders",{method:"POST",body:JSON.stringify(t)}),my:t=>i("/orders/patients/".concat(t,"/orders"),{method:"GET"})},uploads:{image:async t=>{let e=n.Z.get("token"),a=new FormData;a.append("image",t);let i=await fetch("".concat(o,"/upload/image"),{method:"POST",headers:e?{Authorization:"Bearer ".concat(e)}:void 0,body:a});if(!i.ok)throw Error("Upload failed");return i.json()}}}},2649:function(t,e,a){"use strict";function n(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var n in a)t[n]=a[n]}return t}a.d(e,{Z:function(){return o}});var o=function t(e,a){function o(t,o,i){if("undefined"!=typeof document){"number"==typeof(i=n({},a,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),t=encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var s="";for(var r in i)i[r]&&(s+="; "+r,!0!==i[r]&&(s+="="+i[r].split(";")[0]));return document.cookie=t+"="+e.write(o,t)+s}}return Object.create({set:o,get:function(t){if("undefined"!=typeof document&&(!arguments.length||t)){for(var a=document.cookie?document.cookie.split("; "):[],n={},o=0;o<a.length;o++){var i=a[o].split("="),s=i.slice(1).join("=");try{var r=decodeURIComponent(i[0]);if(n[r]=e.read(s,r),t===r)break}catch(t){}}return t?n[t]:n}},remove:function(t,e){o(t,"",n({},e,{expires:-1}))},withAttributes:function(e){return t(this.converter,n({},this.attributes,e))},withConverter:function(e){return t(n({},this.converter,e),this.attributes)}},{attributes:{value:Object.freeze(a)},converter:{value:Object.freeze(e)}})}({read:function(t){return'"'===t[0]&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}},function(t){t.O(0,[724,971,23,744],function(){return t(t.s=2782)}),_N_E=t.O()}]);