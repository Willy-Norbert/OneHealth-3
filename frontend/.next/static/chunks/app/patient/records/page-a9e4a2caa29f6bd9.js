(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[775],{775:function(t,e,o){Promise.resolve().then(o.bind(o,862))},862:function(t,e,o){"use strict";o.r(e),o.d(e,{default:function(){return s}});var n=o(7437),r=o(9039),a=o(1270),i=o(357);function s(){var t,e;let{user:o}=(0,a.a)(),{data:s}=(0,r.ZP)(()=>o?"records-".concat(o.id):null,()=>c("/medical-records/patients/".concat(o.id)));async function c(t){var e;let o=null===(e=document.cookie.split("token=")[1])||void 0===e?void 0:e.split(";")[0];return(await fetch("".concat(i.env.NEXT_PUBLIC_API_URL||"http://localhost:5000/api").concat(t),{headers:{Authorization:"Bearer ".concat(o)}})).json()}return(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsx)("h1",{className:"text-2xl font-semibold text-navy",children:"Medical Records"}),(0,n.jsx)("div",{className:"card p-6",children:(null==s?void 0:null===(e=s.data)||void 0===e?void 0:null===(t=e.history)||void 0===t?void 0:t.length)?(0,n.jsx)("ul",{className:"space-y-3",children:s.data.history.map(t=>{var e;return(0,n.jsxs)("li",{className:"rounded border p-3",children:[(0,n.jsx)("div",{className:"font-medium",children:t.diagnosis}),(0,n.jsxs)("div",{className:"text-sm text-slate-600",children:[new Date(t.date).toLocaleDateString()," â€” ",null===(e=t.doctor)||void 0===e?void 0:e.name]})]},t._id)})}):(0,n.jsx)("div",{className:"text-sm text-slate-600",children:"No records yet."})})]})}},1270:function(t,e,o){"use strict";o.d(e,{H:function(){return d},a:function(){return l}});var n=o(7437),r=o(2265),a=o(2649),i=o(9714),s=o(2800);let c=(0,r.createContext)(void 0);function d(t){let{children:e}=t,[o,d]=(0,r.useState)(a.Z.get("token")||null),[l,u]=(0,r.useState)(null),h=(0,r.useCallback)(t=>{try{let e=(0,i.o)(t);return{id:e.id,role:e.role}}catch(t){return null}},[]);(0,r.useEffect)(()=>{o?(u(h(o)),a.Z.set("token",o)):(u(null),a.Z.remove("token"))},[o,h]);let p=(0,r.useCallback)(async(t,e)=>{var o;let n=await s.hi.login({email:t,password:e}),r=n.token||(null===(o=n.data)||void 0===o?void 0:o.token);if(!r)throw Error("No token returned from server");d(r),await f()},[]),m=(0,r.useCallback)(()=>{d(null),u(null),a.Z.remove("token")},[]),f=(0,r.useCallback)(async()=>{if(o)try{var t;let e=await s.hi.me(),n=(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.user)||(null==e?void 0:e.user)||(null==e?void 0:e.data);u(t=>({...t||h(o)||{id:"",role:"patient"},...n}))}catch(t){}},[o,h]),y=(0,r.useMemo)(()=>({user:l,token:o,isAuthenticated:!!o,login:p,logout:m,refreshProfile:f}),[l,o,p,m,f]);return(0,n.jsx)(c.Provider,{value:y,children:e})}function l(){let t=(0,r.useContext)(c);if(!t)throw Error("useAuth must be used within AuthProvider");return t}},2800:function(t,e,o){"use strict";o.d(e,{hi:function(){return i}});var n=o(2649);let r=o(357).env.NEXT_PUBLIC_API_URL||"http://localhost:5000/api";async function a(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.Z.get("token"),a={"Content-Type":"application/json"};e.headers&&Object.assign(a,e.headers),!1!==e.auth&&o&&(a.Authorization="Bearer ".concat(o));let i=await fetch("".concat(r).concat(t),{...e,headers:a,cache:"no-store"});if(!i.ok)throw Error(await i.text()||"Request failed: ".concat(i.status));try{return await i.json()}catch(t){return{}}}let i={register:t=>a("/auth/register",{method:"POST",body:JSON.stringify(t),auth:!1}),login:t=>a("/auth/login",{method:"POST",body:JSON.stringify(t),auth:!1}),verifyOtp:t=>a("/auth/verify-otp",{method:"POST",body:JSON.stringify(t),auth:!1}),resendOtp:t=>a("/auth/resend-otp",{method:"POST",body:JSON.stringify(t),auth:!1}),forgotPassword:t=>a("/auth/forgot-password",{method:"POST",body:JSON.stringify(t),auth:!1}),resetPassword:t=>a("/auth/reset-password",{method:"POST",body:JSON.stringify(t),auth:!1}),me:()=>a("/auth/me",{method:"GET"}),hospitals:{list:()=>a("/hospitals",{method:"GET",auth:!1}),get:t=>a("/hospitals/".concat(t),{method:"GET",auth:!1})},departments:{list:t=>a("/departments".concat(t?"?".concat(t.toString()):""),{method:"GET",auth:!1}),byHospital:t=>a("/departments/hospital/".concat(t),{method:"GET",auth:!1})},doctors:{list:t=>a("/doctors".concat(t?"?".concat(t.toString()):""),{method:"GET",auth:!1}),byHospitalDepartment:(t,e)=>a("/doctors/hospital/".concat(t,"/department/").concat(e),{method:"GET",auth:!1}),get:t=>a("/doctors/".concat(t),{method:"GET",auth:!1})},insurance:{list:()=>a("/insurance",{method:"GET",auth:!1})},teleconsult:{consultationTypes:()=>a("/teleconsultation/consultation-types",{method:"GET",auth:!1}),insuranceOptions:()=>a("/teleconsultation/insurance-options",{method:"GET",auth:!1}),create:t=>a("/teleconsultation",{method:"POST",body:JSON.stringify(t)}),mine:()=>a("/teleconsultation/my-consultations",{method:"GET"}),get:t=>a("/teleconsultation/".concat(t),{method:"GET"}),doctor:t=>a("/teleconsultation/doctor/".concat(t,"/consultations"),{method:"GET"})},appointments:{availableSlots:()=>a("/appointments/available-slots",{method:"GET",auth:!1}),create:t=>a("/appointments",{method:"POST",body:JSON.stringify(t)}),my:()=>a("/appointments/my-appointments",{method:"GET"}),myDoctor:()=>a("/appointments/my-doctor-appointments",{method:"GET"}),reassign:(t,e)=>a("/appointments/".concat(t,"/reassign"),{method:"PATCH",body:JSON.stringify(e)}),cancel:t=>a("/appointments/".concat(t,"/cancel"),{method:"PATCH"}),get:t=>a("/appointments/".concat(t),{method:"GET"})},payments:{checkout:t=>a("/payments/checkout",{method:"POST",body:JSON.stringify(t)}),verify:t=>a("/payments/verify",{method:"POST",body:JSON.stringify(t)})},meetings:{user:t=>a("/meetings/user/".concat(t),{method:"GET"}),get:t=>a("/meetings/".concat(t),{method:"GET"})},prescriptions:{create:t=>a("/prescriptions",{method:"POST",body:JSON.stringify(t)}),byPatient:t=>a("/prescriptions/patient/".concat(t),{method:"GET"}),myAuthored:()=>a("/prescriptions/doctor-authored",{method:"GET"})},ai:{symptomChecker:t=>a("/ai/symptom-checker",{method:"POST",body:JSON.stringify(t)}),bookAppointmentHelper:t=>a("/ai/book-appointment-helper",{method:"POST",body:JSON.stringify(t)}),prescriptionHelper:t=>a("/ai/prescription-helper",{method:"POST",body:JSON.stringify(t)}),referralSupport:t=>a("/ai/referral-support",{method:"POST",body:JSON.stringify(t)}),healthTips:t=>a("/ai/health-tips",{method:"POST",body:JSON.stringify(t)})},notifications:{list:()=>a("/notifications",{method:"GET"}),markRead:t=>a("/notifications/".concat(t,"/read"),{method:"PUT"})},pharmacy:{list:()=>a("/pharmacies",{method:"GET",auth:!1}),near:(t,e,o)=>a("/pharmacies/near?lat=".concat(t,"&lng=").concat(e).concat(o?"&radius=".concat(o):""),{method:"GET",auth:!1}),get:t=>a("/pharmacies/".concat(t),{method:"GET",auth:!1})},orders:{create:t=>a("/orders",{method:"POST",body:JSON.stringify(t)}),my:t=>a("/orders/patients/".concat(t,"/orders"),{method:"GET"})},uploads:{image:async t=>{let e=n.Z.get("token"),o=new FormData;o.append("image",t);let a=await fetch("".concat(r,"/upload/image"),{method:"POST",headers:e?{Authorization:"Bearer ".concat(e)}:void 0,body:o});if(!a.ok)throw Error("Upload failed");return a.json()}}}},2649:function(t,e,o){"use strict";function n(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var n in o)t[n]=o[n]}return t}o.d(e,{Z:function(){return r}});var r=function t(e,o){function r(t,r,a){if("undefined"!=typeof document){"number"==typeof(a=n({},o,a)).expires&&(a.expires=new Date(Date.now()+864e5*a.expires)),a.expires&&(a.expires=a.expires.toUTCString()),t=encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var i="";for(var s in a)a[s]&&(i+="; "+s,!0!==a[s]&&(i+="="+a[s].split(";")[0]));return document.cookie=t+"="+e.write(r,t)+i}}return Object.create({set:r,get:function(t){if("undefined"!=typeof document&&(!arguments.length||t)){for(var o=document.cookie?document.cookie.split("; "):[],n={},r=0;r<o.length;r++){var a=o[r].split("="),i=a.slice(1).join("=");try{var s=decodeURIComponent(a[0]);if(n[s]=e.read(i,s),t===s)break}catch(t){}}return t?n[t]:n}},remove:function(t,e){r(t,"",n({},e,{expires:-1}))},withAttributes:function(e){return t(this.converter,n({},this.attributes,e))},withConverter:function(e){return t(n({},this.converter,e),this.attributes)}},{attributes:{value:Object.freeze(o)},converter:{value:Object.freeze(e)}})}({read:function(t){return'"'===t[0]&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})},9714:function(t,e,o){"use strict";o.d(e,{o:function(){return r}});class n extends Error{}function r(t,e){let o;if("string"!=typeof t)throw new n("Invalid token specified: must be a string");e||(e={});let r=!0===e.header?0:1,a=t.split(".")[r];if("string"!=typeof a)throw new n(`Invalid token specified: missing part #${r+1}`);try{o=function(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw Error("base64 string is not of the correct length")}try{var o;return o=e,decodeURIComponent(atob(o).replace(/(.)/g,(t,e)=>{let o=e.charCodeAt(0).toString(16).toUpperCase();return o.length<2&&(o="0"+o),"%"+o}))}catch(t){return atob(e)}}(a)}catch(t){throw new n(`Invalid token specified: invalid base64 for part #${r+1} (${t.message})`)}try{return JSON.parse(o)}catch(t){throw new n(`Invalid token specified: invalid json for part #${r+1} (${t.message})`)}}n.prototype.name="InvalidTokenError"}},function(t){t.O(0,[724,971,23,744],function(){return t(t.s=775)}),_N_E=t.O()}]);